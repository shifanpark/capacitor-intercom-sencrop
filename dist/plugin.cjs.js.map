{"version":3,"file":"plugin.cjs.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst Intercom = registerPlugin('Intercom', {\n    web: () => import('./web').then((m) => new m.IntercomWeb()),\n});\nexport * from './definitions';\nexport { Intercom };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class IntercomWeb extends WebPlugin {\n    initialize(config) {\n        const app_id = config === null || config === void 0 ? void 0 : config.app_id;\n        if (!app_id) {\n            console.error('Intercom app_id is not defined');\n            return;\n        }\n        window.intercomSettings = config;\n        try {\n            (function () {\n                const w = window;\n                const ic = w.Intercom;\n                if (typeof ic === 'function') {\n                    ic('reattach_activator');\n                    ic('update', w.intercomSettings);\n                }\n                else {\n                    const d = document;\n                    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n                    const i = function () {\n                        // eslint-disable-next-line prefer-rest-params\n                        i.c(arguments);\n                    };\n                    i.q = [];\n                    i.c = function (args) {\n                        i.q.push(args);\n                    };\n                    w.Intercom = i;\n                    const l = function () {\n                        const s = d.createElement('script');\n                        s.type = 'text/javascript';\n                        s.async = true;\n                        s.src = `https://widget.intercom.io/widget/${app_id}`;\n                        const x = d.getElementsByTagName('script')[0];\n                        if (x === null || x === void 0 ? void 0 : x.parentNode) {\n                            x.parentNode.insertBefore(s, x);\n                        }\n                    };\n                    if (document.readyState === 'complete') {\n                        l();\n                    }\n                    else if (w.attachEvent) {\n                        w.attachEvent('onload', l);\n                    }\n                    else {\n                        w.addEventListener('load', l, false);\n                    }\n                }\n            })();\n        }\n        catch (err) {\n            throw Error('Could not initialize the Intercom plugin.');\n        }\n    }\n    async loginIdentifiedUser(identity) {\n        const { userId, email, userHash } = identity;\n        if (window.Intercom) {\n            window.Intercom('boot', {\n                user_id: userId,\n                email,\n                user_hash: userHash,\n            });\n        }\n    }\n    async loginUnidentifiedUser() {\n        if (window.Intercom) {\n            await window.Intercom('boot', {});\n        }\n    }\n    async updateUser(user) {\n        const { email, phone, name, language } = user;\n        if (window.Intercom) {\n            await window.Intercom('update', {\n                email,\n                phone,\n                name,\n                language_override: language,\n            });\n        }\n    }\n    async setCustomAttributes(payload) {\n        if (window.Intercom) {\n            await window.Intercom('update', payload.attributes);\n        }\n    }\n    async logout() {\n        if (window.Intercom) {\n            await window.Intercom('shutdown');\n        }\n    }\n    async logEvent(event) {\n        const { name, data } = event;\n        if (window.Intercom) {\n            await window.Intercom('trackEvent', name, data);\n        }\n    }\n    async displayMessenger() {\n        if (window.Intercom) {\n            await window.Intercom('show');\n        }\n    }\n    async displayArticle(article) {\n        if (window.Intercom) {\n            await window.Intercom('showArticle', article.id);\n        }\n    }\n    async displayMessageComposer(message) {\n        const { content } = message || {};\n        if (window.Intercom) {\n            if (content) {\n                await window.Intercom('showNewMessage', content);\n            }\n            else {\n                await window.Intercom('showNewMessage');\n            }\n        }\n    }\n    async displayHelpCenter() {\n        if (window.Intercom) {\n            window.Intercom('show');\n        }\n    }\n    async hideMessenger() {\n        if (window.Intercom) {\n            await window.Intercom('hide');\n        }\n    }\n    async displayLauncher() {\n        if (window.Intercom) {\n            await window.Intercom('update', {\n                hide_default_launcher: false,\n            });\n        }\n    }\n    async hideLauncher() {\n        if (window.Intercom) {\n            await window.Intercom('update', {\n                hide_default_launcher: true,\n            });\n        }\n    }\n    async displaySurvey(survey) {\n        if (window.Intercom) {\n            await window.Intercom('startSurvey', survey.id);\n        }\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}