{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst Intercom = registerPlugin('Intercom', {\n    web: () => import('./web').then((m) => new m.IntercomWeb()),\n});\nexport * from './definitions';\nexport { Intercom };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class IntercomWeb extends WebPlugin {\n    initialize(config) {\n        const app_id = config === null || config === void 0 ? void 0 : config.app_id;\n        if (!app_id) {\n            console.error('Intercom app_id is not defined');\n            return;\n        }\n        window.intercomSettings = config;\n        try {\n            (function () {\n                const w = window;\n                const ic = w.Intercom;\n                if (typeof ic === 'function') {\n                    ic('reattach_activator');\n                    ic('update', w.intercomSettings);\n                }\n                else {\n                    const d = document;\n                    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n                    const i = function () {\n                        // eslint-disable-next-line prefer-rest-params\n                        i.c(arguments);\n                    };\n                    i.q = [];\n                    i.c = function (args) {\n                        i.q.push(args);\n                    };\n                    w.Intercom = i;\n                    const l = function () {\n                        const s = d.createElement('script');\n                        s.type = 'text/javascript';\n                        s.async = true;\n                        s.src = `https://widget.intercom.io/widget/${app_id}`;\n                        const x = d.getElementsByTagName('script')[0];\n                        if (x === null || x === void 0 ? void 0 : x.parentNode) {\n                            x.parentNode.insertBefore(s, x);\n                        }\n                    };\n                    if (document.readyState === 'complete') {\n                        l();\n                    }\n                    else if (w.attachEvent) {\n                        w.attachEvent('onload', l);\n                    }\n                    else {\n                        w.addEventListener('load', l, false);\n                    }\n                }\n            })();\n        }\n        catch (err) {\n            throw Error('Could not initialize the Intercom plugin.');\n        }\n    }\n    async loginIdentifiedUser(identity) {\n        const { userId, email, userHash } = identity;\n        if (window.Intercom) {\n            window.Intercom('boot', {\n                user_id: userId,\n                email,\n                user_hash: userHash,\n            });\n        }\n    }\n    async loginUnidentifiedUser() {\n        if (window.Intercom) {\n            await window.Intercom('boot', {});\n        }\n    }\n    async updateUser(user) {\n        const { email, phone, name, language } = user;\n        if (window.Intercom) {\n            await window.Intercom('update', {\n                email,\n                phone,\n                name,\n                language_override: language,\n            });\n        }\n    }\n    async setCustomAttributes(payload) {\n        if (window.Intercom) {\n            await window.Intercom('update', payload.attributes);\n        }\n    }\n    async logout() {\n        if (window.Intercom) {\n            await window.Intercom('shutdown');\n        }\n    }\n    async logEvent(event) {\n        const { name, data } = event;\n        if (window.Intercom) {\n            await window.Intercom('trackEvent', name, data);\n        }\n    }\n    async displayMessenger() {\n        if (window.Intercom) {\n            await window.Intercom('show');\n        }\n    }\n    async displayArticle(article) {\n        if (window.Intercom) {\n            await window.Intercom('showArticle', article.id);\n        }\n    }\n    async displayMessageComposer(message) {\n        const { content } = message || {};\n        if (window.Intercom) {\n            if (content) {\n                await window.Intercom('showNewMessage', content);\n            }\n            else {\n                await window.Intercom('showNewMessage');\n            }\n        }\n    }\n    async displayHelpCenter() {\n        if (window.Intercom) {\n            window.Intercom('show');\n        }\n    }\n    async hideMessenger() {\n        if (window.Intercom) {\n            await window.Intercom('hide');\n        }\n    }\n    async displayLauncher() {\n        if (window.Intercom) {\n            await window.Intercom('update', {\n                hide_default_launcher: false,\n            });\n        }\n    }\n    async hideLauncher() {\n        if (window.Intercom) {\n            await window.Intercom('update', {\n                hide_default_launcher: true,\n            });\n        }\n    }\n    async displaySurvey(survey) {\n        if (window.Intercom) {\n            await window.Intercom('startSurvey', survey.id);\n        }\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}